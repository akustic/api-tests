# api-tests
Api tests example
Чек-лист для запроса: POST https://api.todoist.com/rest/v1/tasks 

## Заготовленные данные:

Входящие задачи тестового пользователя
```{
		"id": 2234262640,
		"name": "Inbox",
		"inbox_project": true
	}
  ```
  
 Созданный проект для целей тестирования 1
 ``` {
		"id": 2234318358,
		"name": "Планы на субботу",
	}
  ```
  
  Созданный проект для целей тестирования 2
  ```{
		"id": 2234320344,
		"name": "Планы на рабочую неделю",
	}
  ```
  
  Созданный проект для целей тестирования 3
```{
		"id": 2234322465,
		"name": "Удаленный проект",
	}
 ```
  Созданный проект для целей тестирования 4
  ```{
		"id": 2234322852,
		"name": "Заархивированный проект",
	}
  ```
  Секция 1
  ```{
		"id": 10246484,
		"project_id": 2234318358,
		"order": 1,
		"name": "Спорт"
	}
  ```
  Секция 2
  ```
  {
		"id": 10246599,
		"project_id": 2234320344,
		"order": 1,
		"name": "Работа"
	}
  ```
  
 Родительская таска:
 ```
 {
 "id": 3838998156
 }
 ```
 ### Чек-лист
 #### Базовые кейсы
 * 1) "content" - указан, "Создать задачу"
Ожидаемый результат: создана новая задача - 
"id": id таски,
"order": lastTaskOrder+1;
"project_id": 2234262640, - inbox
"section_id": 0,
"completed": false,
"label_ids": [],
"priority": 1,
"comment_count": 0,
"created": UTC time
"url": "https://todoist.com/showTask?id={id}"
* 2) повторяем 1)
Ожидаемый результат:
"id": новый id таски,
"order": lastTaskOrder+1;
"project_id": 2234262640, - inbox
"section_id": 0,
"completed": false,
"label_ids": [],
"priority": 1,
"comment_count": 0,
"created": UTC time
"url": "https://todoist.com/showTask?id={id}"
* 3) добавляем таску в проект 2234318358
{
"content": "Создать задачу",
"project_id": 2234318358
}
Ожидаемый результат: 
Таска создана в проекте 2234318358

* 4) Добавить таску как дочернюю к родительской
{
"content": "Дочерняя таска",
"parent": <id родительской таски>
}
Ожидаемый результат: Таска создана, у нее есть родитель, но таска лежит в Inbox
Актуальный результат: Дочерняя таска автоматом попадает в тот же проект, что и родительская

* 5) Добавляем таску с приоритетом  (от 1 до 4)
{
"content": "таска с приоритетом 4",
"project_id": 2234318358,
"priority":4
}
Ожидаемый результат: таска создана с приоритетом 4
* 6) Создать таску с списком label id [{1},{2},{3}], id-ки реальные
{
"content": "Создать задачу cо списком labels",
"project_id": 2234318358,
"label_ids":[{1},{2},{3}]
}
Ожидаемый результат: создана таска со всеми указанными лейблами

* 7) Создать таску в секции Спорт
{
"content": "Пройти курс по растяжке",
"section_id": 10246484
}
Ожидаемый результат: Добавлена таска в секцию Спорт

* 8) Создать таску с due_date, due_string
{
"content": "Создать таску с due_date & due_string",
"project_id": 2234320344,
"due_date":"2020-09-01",
"due_string":"2020-07-01 12:00"
}
Ожидаемый результат: таска не создана, status code 400, тело ответа "Only one of due_string, due_date or due_datetime can be set"

* 9) Добавляем таску с due_string и due_lang

{
"content": "Создать таску с due_string & due_lang",
"project_id": 2234320344,
"due_string":"next Friday",
"due_lang":"ee"
}
Ожидаемый результат: status code 200, и появился блок с due

#### Дополнительные кейсы: 

* 10) "content" - отсутствует в Body
Ожидаемый результат: обязательное поле, status code 400, текст тела ответа "Empty content"
* 11) "content" - указан, но "" (пустой).
Ожидаемый результат: обязательное поле, status code 400, текст тела ответа "Empty content"
* 12) "content" - указан, но " " (пробел).
Ожидаемый результат: обязательное поле, status code 400, текст тела ответа "Item content is empty"

* 13) Повторяем 4), но дополнительно указываем "project_id": 2234320344
Ожидаемый результат: Вообще я ожидала, что таска попадет в 2234320344, а родитель установлен не будет
Актуальный результат: Таска создана, попала в проект родителя и стала дочерней для родителя

* 14) Добавляем таску с приоритетом 5
{
"content": "таска с приоритетом 5",
"project_id": 2234318358,
"priority":5
}
Ожидаемый результат: Таска не создана, status code 400, тело ответа: Unsupported priority value

* 15) Добавляем таску с order = 0
{
"content": "Создать задачу c order = 0",
"project_id": 2234318358,
"order":0
}
Ожидаемый результат: Таска не будет создана, так как order ДОЛЖЕН БЫТЬ > 0
Актуальный результат: Таска создана, а ордер расчитался на основании тасочек, когда созданных в данном проекте

* 16) Добавляем таску c заведомо большим order, чем тасок когда-то создавалось в проекте
{
"content": "Создать задачу c order = 2000",
"project_id": 2234318358,
"order":2000
}
Ожидаемый результат: Будет создана таска с order=2000

* 17) Пробуем еще раз создать таску с order = 2000
Ожидаемый результат: новая таска не создана, status code 400 и  что-то в виде нельзя создать таску с таким порядковым номером в рамках проекта
Реальный результат: таска создана с таким же order

* 18) Создать таску с удаленным label
Ожидаемый результат: Таска не создана, так как среди label-ов есть удаленный

* 19) Создать таску в удаленном проекте
{
"content": "Создать задачу в удаленном проекте",
"project_id": 2234322465,
}
Ожидаемый результат: Нельзя создать таску в удаленном проекте

* 20) Создать таску в заархивированном проекте
{
"content": "Создать задачу в заархивированном проекте",
"project_id": 2234322465,
}
Ожидаемый результат: Нельзя создать таску в заархивированном проекте

* 21) Добавляем таску в секцию Спорт, но в проект, где такой секции нет
{
"content": "Пройти курс по растяжке - добавлено в проект 2234320344",
"section_id": 10246484,
"project_id": 2234320344
}
Ожидаемый результат: Будет учитываться project_id из секции

* 22) Добавить таску в удаленную секцию
Ожидаемый результат: Так сделать нельзя, status code 400

* 23) Добавить таску в заархивированную секцию
Ожидаемый результат: Так сделать нельзя, status code 400

* 24) Добавляем таску с due_date и due_datetime
{
"content": "Создать таску с due_date & due_datetime",
"project_id": 2234320344,
"due_date":"2020-09-01",
"due_string":"2020-09-01T11:00:00Z"
}

* 25) Добавляем таску с due_date и due_lang

{
"content": "Создать таску с due_date & due_lang",
"project_id": 2234320344,
"due_date":"2020-09-01",
"due_lang":"gb"
}
Ожидаемый результат: status code 200, и появился блок с due


